<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>3D Möbius Strip</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Arimo:wght@400;500;600;700&display=swap');

        html,
        body {
            height: 100%;
            margin: 0;
            background: #06038D;
            /* Indian chakra navy blue */
            overflow: hidden;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0;
            padding: 0;
        }

        #canvas {
            width: 100vw;
            height: 100vh;
            display: block;
            position: absolute;
            top: 0;
            left: 0;
        }

        .text-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 10;
            color: #FFFAF0;
        }

        .text-overlay * {
            pointer-events: auto;
        }

        .header-info {
            position: absolute;
            top: 40px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.5px;
            padding: 0 40px;
        }

        .date {
            opacity: 0.9;
        }

        .location {
            opacity: 0.9;
        }

        .time-container {
            text-align: right;
        }

        .time {
            opacity: 0.9;
        }

        .time-ist {
            opacity: 0.9;
            font-size: 14px;
            margin-top: 2px;
        }

        .company-name {
            position: absolute;
            top: 50%;
            left: 40px;
            transform: translateY(-50%);
            font-size: 38.4px;
            font-weight: 300;
            font-family: 'Inter', sans-serif;
            letter-spacing: 2px;
            line-height: 1.1;
            text-transform: uppercase;
        }

        .footer-info {
            position: absolute;
            bottom: 40px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.5px;
            padding: 0 40px;
        }

        .footer-info .location {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
        }

        .info-link {
            color: #FFFAF0;
            text-decoration: none;
            opacity: 0.9;
            transition: opacity 0.2s ease;
            cursor: pointer;
            pointer-events: auto;
        }

        .info-link:hover {
            opacity: 1;
        }

        .info-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(6, 3, 141, 0.95);
            z-index: 1000;
            display: none;
            backdrop-filter: blur(10px);
        }

        .info-modal.active {
            display: block;
        }

        .info-content {
            max-width: 600px;
            padding: 0;
            text-align: left;
            color: #FFFAF0;
            font-family: 'Inter', sans-serif;
            position: absolute;
            left: 40px;
            top: 50%;
            transform: translateY(-50%);
        }

        .info-content p {
            font-size: 16px;
            line-height: 1.6;
            margin: 0;
            font-weight: 300;
            letter-spacing: 0.5px;
        }

        .close-modal {
            position: absolute;
            bottom: 40px;
            left: 40px;
            color: #FFFAF0;
            text-decoration: none;
            opacity: 0.9;
            transition: opacity 0.2s ease;
            cursor: pointer;
            font-size: 14px;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .close-modal:hover {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .info-content {
                padding: 0;
                max-width: 90%;
                left: 20px;
            }

            .info-content p {
                font-size: 14px;
            }

            .close-modal {
                bottom: 20px;
                left: 20px;
            }
        }

        .email {
            color: #FFFAF0;
            text-decoration: none;
            opacity: 0.9;
            transition: opacity 0.2s ease;
        }

        .email:hover {
            opacity: 1;
        }

        @media (max-width: 768px) {

            .header-info,
            .footer-info {
                padding: 0 20px;
                font-size: 12px;
            }

            .company-name {
                left: 20px;
                font-size: 28.8px;
            }

            .footer-info {
                bottom: 20px;
            }
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/OBJLoader.js"></script>
</head>

<body>
    <canvas id="canvas"></canvas>

    <div class="text-overlay">
        <div class="header-info">
            <div class="date">8/21/2025</div>
            <div class="location">SAN FRANCISCO</div>
            <div class="time-container">
                <div class="time">16:57:40 PT</div>
                <div class="time-ist">05:27:40 IST</div>
            </div>
        </div>

        <div class="company-name">
            SHUNYA
        </div>

        <div class="footer-info">
            <div class="info-link" onclick="openInfoModal()">INFO</div>
            <div class="location">BANGALORE</div>
            <div class="email">INFO@SHUNYA.COM</div>
        </div>
    </div>

    <!-- Info Modal -->
    <div class="info-modal" id="infoModal">
        <div class="info-content">
            <p>India doesn't lack technical genius, it lacks the cultural oxygen that lets genius act. Shunya hand picks
                gifted Indian youth and immerses them in Silicon Valley for three months. We believe agency can be
                taught, and greatness can come from anywhere.</p>
        </div>
        <div class="close-modal" onclick="closeInfoModal()">CLOSE</div>
    </div>

    <script>
        // 3D Möbius Strip with OBJ loading
        let scene, camera, renderer, mobiusStrip;
        let mouseX = 0, mouseY = 0;
        let targetX = 0, targetY = 0;
        let velocityX = 0, velocityY = 0;
        let lastMouseX = 0, lastMouseY = 0;

        function init() {
            // Create scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x06038D); // Indian chakra navy blue

            // Create camera
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 0, 15);
            camera.lookAt(0, 0, 0);

            // Create renderer
            const canvas = document.getElementById('canvas');
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;

            // Add lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 5, 5);
            directionalLight.castShadow = true;
            scene.add(directionalLight);

            const fillLight = new THREE.DirectionalLight(0xffffff, 0.3);
            fillLight.position.set(-3, -1, -2);
            scene.add(fillLight);

            // Load OBJ file
            const loader = new THREE.OBJLoader();
            loader.load(
                'models/mobius_strip.obj',
                function (object) {
                    console.log('Möbius strip loaded successfully!');

                    // Apply material to all meshes in the object
                    const material = new THREE.MeshStandardMaterial({
                        color: 0xFFFAF0, // Warm floral white
                        metalness: 0.1, // Lower metallic property for more natural look
                        roughness: 0.4, // Slightly higher roughness for softer appearance
                        transparent: false,
                        side: THREE.DoubleSide
                    });

                    object.traverse(function (child) {
                        if (child instanceof THREE.Mesh) {
                            child.material = material;
                            child.castShadow = true;
                            child.receiveShadow = true;
                        }
                    });

                    // Scale and position the object (20% bigger again)
                    object.scale.set(0.018, 0.018, 0.018);
                    object.position.set(0, 0, 0);

                    // Fix initial orientation
                    object.rotation.x = Math.PI * 0.2;
                    object.rotation.y = Math.PI * 0.3;
                    object.rotation.z = 0;

                    scene.add(object);
                    mobiusStrip = object;
                },
                function (progress) {
                    console.log('Loading progress: ', (progress.loaded / progress.total * 100) + '%');
                },
                function (error) {
                    console.error('Error loading OBJ file:', error);
                    // Fallback: create a simple torus if OBJ loading fails
                    createFallbackTorus();
                }
            );

            // Mouse tracking and window resize handling
            document.addEventListener('mousemove', onMouseMove, false);
            window.addEventListener('resize', onWindowResize, false);

            // Start animation
            animate();
        }

        function createFallbackTorus() {
            console.log('Creating fallback torus geometry...');
            const geometry = new THREE.TorusGeometry(1.5, 0.4, 16, 100);
            const material = new THREE.MeshStandardMaterial({
                color: 0xFFFAF0, // Warm floral white
                metalness: 0.1, // Lower metallic property for more natural look
                roughness: 0.4, // Slightly higher roughness for softer appearance
                side: THREE.DoubleSide
            });

            mobiusStrip = new THREE.Mesh(geometry, material);
            mobiusStrip.scale.set(0.054, 0.054, 0.054);
            mobiusStrip.position.set(0, 0, 0);

            // Fix initial orientation for fallback too
            mobiusStrip.rotation.x = Math.PI * 0.2;
            mobiusStrip.rotation.y = Math.PI * 0.3;
            mobiusStrip.rotation.z = 0;

            mobiusStrip.castShadow = true;
            mobiusStrip.receiveShadow = true;
            scene.add(mobiusStrip);
        }

        function onMouseMove(event) {
            // Convert mouse position to 3D world coordinates
            const newMouseX = (event.clientX / window.innerWidth) * 2 - 1;
            const newMouseY = -(event.clientY / window.innerHeight) * 2 + 1;

            // Calculate mouse movement velocity
            const deltaX = newMouseX - lastMouseX;
            const deltaY = newMouseY - lastMouseY;

            // Add to velocity with momentum (reduced for slower movement)
            velocityX += deltaX * 0.15;
            velocityY += deltaY * 0.15;

            // Scale the movement to reasonable bounds
            const moveRange = 5;
            targetX = newMouseX * moveRange;
            targetY = newMouseY * moveRange;

            // Update last mouse position
            lastMouseX = newMouseX;
            lastMouseY = newMouseY;
        }

        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        function animate() {
            requestAnimationFrame(animate);

            if (mobiusStrip) {
                // Pure automatic 360-degree Y-axis rotation (keep as is)
                mobiusStrip.rotation.y += 0.01;

                // PURE momentum-based movement - NO attraction to prevent oscillation
                mobiusStrip.position.x += velocityX;
                mobiusStrip.position.y += velocityY;

                // Only gentle friction - no forces pulling toward cursor
                const friction = 0.988;
                velocityX *= friction;
                velocityY *= friction;

                // Calculate actual screen boundaries based on camera view
                const aspect = camera.aspect;
                const fov = camera.fov * Math.PI / 180; // Convert to radians
                const distance = camera.position.z; // Camera distance from origin

                // Calculate the actual visible area at the strip's Z position (z=0)
                const height = 2 * Math.tan(fov / 2) * distance;
                const width = height * aspect;

                const screenBounds = {
                    left: -width / 2,
                    right: width / 2,
                    top: height / 2,
                    bottom: -height / 2
                };

                // Check horizontal bounds and bounce
                if (mobiusStrip.position.x > screenBounds.right) {
                    mobiusStrip.position.x = screenBounds.right;
                    velocityX = -Math.abs(velocityX) * 0.8; // Bounce left with some energy loss
                }
                if (mobiusStrip.position.x < screenBounds.left) {
                    mobiusStrip.position.x = screenBounds.left;
                    velocityX = Math.abs(velocityX) * 0.8; // Bounce right with some energy loss
                }

                // Check vertical bounds and bounce
                if (mobiusStrip.position.y > screenBounds.top) {
                    mobiusStrip.position.y = screenBounds.top;
                    velocityY = -Math.abs(velocityY) * 0.8; // Bounce down with some energy loss
                }
                if (mobiusStrip.position.y < screenBounds.bottom) {
                    mobiusStrip.position.y = screenBounds.bottom;
                    velocityY = Math.abs(velocityY) * 0.8; // Bounce up with some energy loss
                }
            }

            renderer.render(scene, camera);
        }

        // Initialize when page loads
        window.addEventListener('load', init);

        // Add click listener for INFO button
        document.addEventListener('DOMContentLoaded', function () {
            const infoButton = document.querySelector('.info-link');
            console.log('Info button found:', infoButton);

            if (infoButton) {
                infoButton.addEventListener('click', function (e) {
                    console.log('Info button clicked!');
                    e.preventDefault();
                    openInfoModal();
                });
            }
        });

        // Modal functions
        function openInfoModal() {
            console.log('Opening modal...');
            const modal = document.getElementById('infoModal');
            console.log('Modal element:', modal);
            modal.classList.add('active');
            console.log('Modal classes:', modal.classList);
        }

        function closeInfoModal() {
            console.log('Closing modal...');
            document.getElementById('infoModal').classList.remove('active');
        }

        // Close modal when clicking outside content
        document.addEventListener('click', function (event) {
            const modal = document.getElementById('infoModal');
            const content = modal.querySelector('.info-content');
            const closeBtn = modal.querySelector('.close-modal');
            const infoBtn = document.querySelector('.info-link');

            if (modal.classList.contains('active') &&
                !content.contains(event.target) &&
                !closeBtn.contains(event.target) &&
                !infoBtn.contains(event.target)) {
                closeInfoModal();
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', function (event) {
            if (event.key === 'Escape') {
                closeInfoModal();
            }
        });
    </script>
</body>

</html>